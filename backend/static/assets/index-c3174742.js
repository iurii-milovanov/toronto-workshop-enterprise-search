import{b5 as e,b6 as fe,b7 as ve,b8 as Se,r as _,b9 as te,ba as Ce,bb as ye,bc as je,bd as be,be as Te,bf as Ne,bg as we}from"./vendor-7aeae076.js";import{S as ke,E as Le,a as Ie,b as Ae,D as Re,c as Pe}from"./fluentui-icons-09adad71.js";import{S as f,I as V,P as Ee,T as F,a as Be,b as O,c as se,d as Me,D as qe,e as Oe,C as $,f as $e}from"./fluentui-react-b7bb3823.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();const Qe="modulepreload",De=function(t){return"/"+t},X={},Y=function(s,o,c){if(!o||o.length===0)return s();const a=document.getElementsByTagName("link");return Promise.all(o.map(n=>{if(n=De(n),n in X)return;X[n]=!0;const r=n.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!c)for(let d=a.length-1;d>=0;d--){const g=a[d];if(g.href===n&&(!r||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${u}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":Qe,r||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),r)return new Promise((d,g)=>{l.addEventListener("load",d),l.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s()).catch(n=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n})};const Fe="_layout_1nrkm_1",He="_header_1nrkm_7",We="_headerContainer_1nrkm_12",ze="_headerTitleContainer_1nrkm_20",Ue="_headerLogo_1nrkm_28",Ge="_headerTitle_1nrkm_20",Je="_headerNavList_1nrkm_37",Ke="_headerNavPageLink_1nrkm_43",Ve="_headerNavPageLinkActive_1nrkm_57",Xe="_headerNavLeftMargin_1nrkm_62",Ye="_headerRightText_1nrkm_66",Ze="_microsoftLogo_1nrkm_71",et="_githubLogo_1nrkm_76",k={layout:Fe,header:He,headerContainer:We,headerTitleContainer:ze,headerLogo:Ue,headerTitle:Ge,headerNavList:Je,headerNavPageLink:Ke,headerNavPageLinkActive:Ve,headerNavLeftMargin:Xe,headerRightText:Ye,microsoftLogo:Ze,githubLogo:et},tt=()=>e.jsxs("div",{className:k.layout,children:[e.jsx("header",{className:k.header,role:"banner",children:e.jsx("div",{className:k.headerContainer,children:e.jsx(fe,{to:"/",className:k.headerTitleContainer,children:e.jsx("h3",{className:k.headerTitle,children:"SoftServe AI Assistant"})})})}),e.jsx(ve,{})]}),st="_container_18ti9_1",nt="_chatRoot_18ti9_8",at="_chatContainer_18ti9_13",ot="_chatEmptyState_18ti9_21",rt="_chatEmptyStateTitle_18ti9_31",it="_chatEmptyStateSubtitle_18ti9_38",ct="_chatMessageStream_18ti9_54",lt="_chatMessageGpt_18ti9_66",ut="_chatMessageGptMinWidth_18ti9_73",dt="_chatInput_18ti9_78",ht="_chatAnalysisPanel_18ti9_91",pt="_chatSettingsSeparator_18ti9_99",mt="_loadingLogo_18ti9_103",gt="_commandsContainer_18ti9_107",_t="_commandButton_18ti9_112",p={container:st,chatRoot:nt,chatContainer:at,chatEmptyState:ot,chatEmptyStateTitle:rt,chatEmptyStateSubtitle:it,chatMessageStream:ct,chatMessageGpt:lt,chatMessageGptMinWidth:ut,chatInput:dt,chatAnalysisPanel:ht,chatSettingsSeparator:pt,loadingLogo:mt,commandsContainer:gt,commandButton:_t};async function xs(t){var c,a,n,r,u,m,l,d,g;const s=await fetch("/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t.question,approach:t.approach,overrides:{retrieval_mode:(c=t.overrides)==null?void 0:c.retrievalMode,semantic_ranker:(a=t.overrides)==null?void 0:a.semanticRanker,semantic_captions:(n=t.overrides)==null?void 0:n.semanticCaptions,top:(r=t.overrides)==null?void 0:r.top,temperature:(u=t.overrides)==null?void 0:u.temperature,prompt_template:(m=t.overrides)==null?void 0:m.promptTemplate,prompt_template_prefix:(l=t.overrides)==null?void 0:l.promptTemplatePrefix,prompt_template_suffix:(d=t.overrides)==null?void 0:d.promptTemplateSuffix,exclude_category:(g=t.overrides)==null?void 0:g.excludeCategory}})}),o=await s.json();if(s.status>299||!s.ok)throw Error(o.error||"Unknown error");return o}async function xt(t){var c,a,n,r,u,m,l,d,g,T;const s=await fetch("/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:t.history,approach:t.approach,overrides:{retrieval_mode:(c=t.overrides)==null?void 0:c.retrievalMode,semantic_ranker:(a=t.overrides)==null?void 0:a.semanticRanker,semantic_captions:(n=t.overrides)==null?void 0:n.semanticCaptions,top:(r=t.overrides)==null?void 0:r.top,temperature:(u=t.overrides)==null?void 0:u.temperature,prompt_template:(m=t.overrides)==null?void 0:m.promptTemplate,prompt_template_prefix:(l=t.overrides)==null?void 0:l.promptTemplatePrefix,prompt_template_suffix:(d=t.overrides)==null?void 0:d.promptTemplateSuffix,exclude_category:(g=t.overrides)==null?void 0:g.excludeCategory,suggest_followup_questions:(T=t.overrides)==null?void 0:T.suggestFollowupQuestions}})}),o=await s.json();if(s.status>299||!s.ok)throw Error(o.error||"Unknown error");return o}function ft(t){return`/content/${t}`}function vt(t,s){for(let o of s){const c=JSON.parse(JSON.stringify(o));if(console.log("OBJ.TITLE: "+c.title),console.log("OBJ.URL: "+c.url),c.url.startsWith(t))return c.title}return t}var ne=(t=>(t.RetrieveThenRead="rtr",t.ReadRetrieveRead="rrr",t.ReadDecomposeAsk="rda",t))(ne||{}),v=(t=>(t.Hybrid="hybrid",t.Vectors="vectors",t.Text="text",t))(v||{});const St="_answerContainer_9n41r_1",Ct="_answerLogo_9n41r_9",yt="_answerText_9n41r_13",jt="_selected_9n41r_32",bt="_citationLearnMore_9n41r_36",Tt="_citation_9n41r_36",Nt="_followupQuestionsList_9n41r_58",wt="_followupQuestionLearnMore_9n41r_62",kt="_followupQuestion_9n41r_58",Lt="_supContainer_9n41r_81",It="_retryButton_9n41r_110",At="_loadingdots_9n41r_132",Rt="_loading_9n41r_132",x={answerContainer:St,answerLogo:Ct,answerText:yt,selected:jt,citationLearnMore:bt,citation:Tt,followupQuestionsList:Nt,followupQuestionLearnMore:wt,followupQuestion:kt,supContainer:Lt,retryButton:It,loadingdots:At,loading:Rt};function Pt(t,s){const o=[],c=[];let a=t.replace(/<<([^>>]+)>>/g,(u,m)=>(c.push(m),""));return a=a.trim(),{answerHtml:a.split(/\(\(([^\)]+)\)\)/g).map((u,m)=>{if(m%2===0)return u;{let l;o.indexOf(u)!==-1?l=o.indexOf(u)+1:(o.push(u),l=o.length);const d=ft(u);return Se(e.jsx("a",{className:"supContainer",title:u,onClick:()=>s(d),children:e.jsx("sup",{children:l})}))}}).join(""),citations:o,followupQuestions:c}}const ae=()=>e.jsx(ke,{primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Answer logo"}),Et=({answer:t,isSelected:s,onCitationClicked:o,onThoughtProcessClicked:c,onSupportingContentClicked:a,onFollowupQuestionClicked:n,showFollowupQuestions:r})=>{const u=_.useMemo(()=>Pt(t.answer,o),[t]),m=te.sanitize(u.answerHtml);return console.log(`ANSWER:
`+JSON.stringify(t)),console.log(`PARSED_ANSWER:
`+JSON.stringify(u)),e.jsxs(f,{className:`${x.answerContainer} ${s&&x.selected}`,verticalAlign:"space-between",children:[e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,horizontalAlign:"space-between",children:[e.jsx(ae,{}),e.jsxs("div",{children:[e.jsx(V,{style:{color:"black"},iconProps:{iconName:"Lightbulb"},title:"Show thought process",ariaLabel:"Show thought process",onClick:()=>c(),disabled:!t.thoughts}),e.jsx(V,{style:{color:"black"},iconProps:{iconName:"ClipboardList"},title:"Show supporting content",ariaLabel:"Show supporting content",onClick:()=>a(),disabled:!t.data_points.length})]})]})}),e.jsx(f.Item,{grow:!0,children:e.jsx("div",{className:x.answerText,dangerouslySetInnerHTML:{__html:m}})}),!!u.citations.length&&e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,wrap:!0,tokens:{childrenGap:5},children:[e.jsx("span",{className:x.citationLearnMore,children:"Citations:"}),u.citations.map((l,d)=>{console.log(`x:
`+JSON.stringify(l));const g=vt(l,t.results_formatted);return console.log("TITLE: "+g),e.jsx("a",{target:"_blank",className:x.citation,href:l,title:g,onClick:()=>{},children:`${++d}. ${g}`},d)})]})}),!!u.followupQuestions.length&&r&&n&&e.jsx(f.Item,{children:e.jsxs(f,{horizontal:!0,wrap:!0,className:`${u.citations.length?x.followupQuestionsList:""}`,tokens:{childrenGap:6},children:[e.jsx("span",{className:x.followupQuestionLearnMore,children:"Follow-up questions:"}),u.followupQuestions.map((l,d)=>e.jsx("a",{className:x.followupQuestion,title:l,onClick:()=>n(l),children:`${l}`},d))]})})]})},Bt=()=>{const t=Ce({from:{opacity:0},to:{opacity:1}});return e.jsx(ye.div,{style:{...t},children:e.jsxs(f,{className:x.answerContainer,verticalAlign:"space-between",children:[e.jsx(ae,{}),e.jsx(f.Item,{grow:!0,children:e.jsxs("p",{className:x.answerText,children:["Generating answer",e.jsx("span",{className:x.loadingdots})]})})]})})},Mt=({error:t,onRetry:s})=>e.jsxs(f,{className:x.answerContainer,verticalAlign:"space-between",children:[e.jsx(Le,{"aria-hidden":"true","aria-label":"Error icon",primaryFill:"red"}),e.jsx(f.Item,{grow:!0,children:e.jsx("p",{className:x.answerText,children:t})}),e.jsx(Ee,{className:x.retryButton,onClick:s,text:"Retry"})]}),qt="_questionInputContainer_sk61p_1",Ot="_questionInputTextArea_sk61p_10",$t="_questionInputButtonsContainer_sk61p_15",Qt="_questionInputSendButton_sk61p_21",Dt="_questionInputSendButtonDisabled_sk61p_25",L={questionInputContainer:qt,questionInputTextArea:Ot,questionInputButtonsContainer:$t,questionInputSendButton:Qt,questionInputSendButtonDisabled:Dt},Ft=({onSend:t,disabled:s,placeholder:o,clearOnSend:c})=>{const[a,n]=_.useState(""),r=()=>{s||!a.trim()||(t(a),c&&n(""))},u=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),r())},m=(d,g)=>{g?g.length<=1e3&&n(g):n("")},l=s||!a.trim();return e.jsxs(f,{horizontal:!0,className:L.questionInputContainer,children:[e.jsx(F,{className:L.questionInputTextArea,placeholder:o,multiline:!0,resizable:!1,borderless:!0,value:a,onChange:m,onKeyDown:u}),e.jsx("div",{className:L.questionInputButtonsContainer,children:e.jsx("div",{className:`${L.questionInputSendButton} ${l?L.questionInputSendButtonDisabled:""}`,"aria-label":"Ask question button",onClick:r,children:e.jsx(Ie,{primaryFill:"rgba(115, 118, 225, 1)"})})})]})},Ht="_examplesNavList_1eu46_1",Wt="_example_1eu46_1",zt="_exampleText_1eu46_27",H={examplesNavList:Ht,example:Wt,exampleText:zt},Ut=({text:t,value:s,onClick:o})=>e.jsx("div",{className:H.example,onClick:()=>o(s),children:e.jsx("p",{className:H.exampleText,children:t})}),Gt=[{text:"Case Studies for Agriculture",value:"Case Studies for Agriculture"},{text:"What we have for Automotive?",value:"What we have for Automotive?"},{text:"Blockchain expertise",value:"Blockchain expertise"},{text:"Who is the CTO of SoftServe?",value:"CTO of SoftServe?"},{text:"Prospecting email about our AI capabilities",value:"Write a prospecting email to a company interested in SoftServe's AI capabilities"},{text:"Data Scientist job description (Retail, AWS stack)",value:"Write a job description for a Data Scientist (Retail industry, AWS stack)"}],Jt=({onExampleClicked:t})=>e.jsx("ul",{className:H.examplesNavList,children:Gt.map((s,o)=>e.jsx("li",{children:e.jsx(Ut,{text:s.text,value:s.value,onClick:t})},o))}),Kt="_container_1rakl_1",Vt="_message_1rakl_9",Z={container:Kt,message:Vt},Q=({message:t})=>e.jsx("div",{className:Z.container,children:e.jsx("div",{className:Z.message,children:t})}),Xt="_thoughtProcess_1rdxk_1",Yt={thoughtProcess:Xt};function Zt(t){const s=t.split(": "),o=s[0],c=s.slice(1).join(": ");return{title:o,content:c}}const es="_supportingContentNavList_1yfye_1",ts="_supportingContentItem_1yfye_9",ss="_supportingContentItemHeader_1yfye_21",ns="_supportingContentItemText_1yfye_25",P={supportingContentNavList:es,supportingContentItem:ts,supportingContentItemHeader:ss,supportingContentItemText:ns},as=({supportingContent:t})=>e.jsx("ul",{className:P.supportingContentNavList,children:t.map((s,o)=>{const c=Zt(s);return e.jsxs("li",{className:P.supportingContentItem,children:[e.jsx("h4",{className:P.supportingContentItemHeader,children:c.title}),e.jsx("p",{className:P.supportingContentItemText,children:c.content})]})})});var S=(t=>(t.ThoughtProcessTab="thoughtProcess",t.SupportingContentTab="supportingContent",t.CitationTab="citation",t))(S||{});const D={disabled:!0,style:{color:"grey"}},os=({answer:t,activeTab:s,activeCitation:o,citationHeight:c,className:a,onActiveTabChanged:n})=>{const r=!t.thoughts,u=!t.data_points.length,m=!o,l=te.sanitize(t.thoughts);return e.jsxs(Be,{className:a,selectedKey:s,onLinkClick:d=>d&&n(d.props.itemKey),children:[e.jsx(O,{itemKey:S.ThoughtProcessTab,headerText:"Thought process",headerButtonProps:r?D:void 0,children:e.jsx("div",{className:Yt.thoughtProcess,dangerouslySetInnerHTML:{__html:l}})}),e.jsx(O,{itemKey:S.SupportingContentTab,headerText:"Supporting content",headerButtonProps:u?D:void 0,children:e.jsx(as,{supportingContent:t.data_points})}),e.jsx(O,{itemKey:S.CitationTab,headerText:"Citation",headerButtonProps:m?D:void 0,children:e.jsx("iframe",{title:"Citation",src:o,width:"100%",height:c})})]})},rs="_container_cfwv2_1",is={container:rs},cs=({className:t,onClick:s})=>e.jsxs("div",{className:`${is.container} ${t??""}`,onClick:s,children:[e.jsx(Ae,{}),e.jsx(se,{children:"Developer settings"})]}),ls="_container_1opm5_1",us="_disabled_1opm5_8",ee={container:ls,disabled:us},ds=({className:t,disabled:s,onClick:o})=>e.jsxs("div",{className:`${ee.container} ${t??""} ${s&&ee.disabled}`,onClick:o,children:[e.jsx(Re,{}),e.jsx(se,{children:"Clear chat"})]}),hs=()=>{const[t,s]=_.useState(!1),[o,c]=_.useState(""),[a,n]=_.useState(20),[r,u]=_.useState(v.Hybrid),[m,l]=_.useState(!0),[d,g]=_.useState(!1),[T,oe]=_.useState(""),[E,re]=_.useState(!1),C=_.useRef(""),W=_.useRef(null),[I,z]=_.useState(!1),[A,B]=_.useState(),[U,M]=_.useState(),[N,y]=_.useState(void 0),[w,G]=_.useState(0),[j,J]=_.useState([]),R=async h=>{C.current=h,A&&B(void 0),z(!0),M(void 0),y(void 0);try{const b={history:[...j.map(K=>({user:K[0],bot:K[1].answer})),{user:h,bot:void 0}],approach:ne.ReadRetrieveRead,overrides:{promptTemplate:o.length===0?void 0:o,excludeCategory:T.length===0?void 0:T,top:a,retrievalMode:r,semanticRanker:m,semanticCaptions:d,suggestFollowupQuestions:E}},xe=await xt(b);J([...j,[h,xe]])}catch(i){B(i)}finally{z(!1)}},ie=()=>{C.current="",A&&B(void 0),M(void 0),y(void 0),J([])};_.useEffect(()=>{var h;return(h=W.current)==null?void 0:h.scrollIntoView({behavior:"smooth"})},[I]);const ce=(h,i)=>{c(i||"")},le=(h,i)=>{n(parseInt(i||"3"))},ue=(h,i,b)=>{u((i==null?void 0:i.data)||v.Hybrid)},de=(h,i)=>{l(!!i)},he=(h,i)=>{g(!!i)},pe=(h,i)=>{oe(i||"")},me=(h,i)=>{re(!!i)},ge=h=>{R(h)},_e=(h,i)=>{U===h&&N===S.CitationTab&&w===i?y(void 0):(M(h),y(S.CitationTab)),G(i)},q=(h,i)=>{y(N===h&&w===i?void 0:h),G(i)};return e.jsxs("div",{className:p.container,children:[e.jsxs("div",{className:p.commandsContainer,children:[e.jsx(ds,{className:p.commandButton,onClick:ie,disabled:!C.current||I}),e.jsx(cs,{className:p.commandButton,onClick:()=>s(!t)})]}),e.jsxs("div",{className:p.chatRoot,children:[e.jsxs("div",{className:p.chatContainer,children:[C.current?e.jsxs("div",{className:p.chatMessageStream,children:[j.map((h,i)=>e.jsxs("div",{children:[e.jsx(Q,{message:h[0]}),e.jsx("div",{className:p.chatMessageGpt,children:e.jsx(Et,{answer:h[1],isSelected:w===i&&N!==void 0,onCitationClicked:b=>_e(b,i),onThoughtProcessClicked:()=>q(S.ThoughtProcessTab,i),onSupportingContentClicked:()=>q(S.SupportingContentTab,i),onFollowupQuestionClicked:b=>R(b),showFollowupQuestions:E&&j.length-1===i},i)})]},i)),I&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{message:C.current}),e.jsx("div",{className:p.chatMessageGptMinWidth,children:e.jsx(Bt,{})})]}),A?e.jsxs(e.Fragment,{children:[e.jsx(Q,{message:C.current}),e.jsx("div",{className:p.chatMessageGptMinWidth,children:e.jsx(Mt,{error:A.toString(),onRetry:()=>R(C.current)})})]}):null,e.jsx("div",{ref:W})]}):e.jsxs("div",{className:p.chatEmptyState,children:[e.jsx(Pe,{fontSize:"120px",primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Chat logo"}),e.jsx("h1",{className:p.chatEmptyStateTitle,children:"Chat with your SoftServe Assistant"}),e.jsx("h2",{className:p.chatEmptyStateSubtitle,children:"Ask anything or try an example"}),e.jsx(Jt,{onExampleClicked:ge})]}),e.jsx("div",{className:p.chatInput,children:e.jsx(Ft,{clearOnSend:!0,placeholder:"Type a new question (e.g. what AI services does SoftServe provide?)",disabled:I,onSend:h=>R(h)})})]}),j.length>0&&N&&e.jsx(os,{className:p.chatAnalysisPanel,activeCitation:U,onActiveTabChanged:h=>q(h,w),citationHeight:"810px",answer:j[w][1],activeTab:N}),e.jsxs(Me,{headerText:"Configure answer generation",isOpen:t,isBlocking:!1,onDismiss:()=>s(!1),closeButtonAriaLabel:"Close",onRenderFooterContent:()=>e.jsx(qe,{onClick:()=>s(!1),children:"Close"}),isFooterAtBottom:!0,children:[e.jsx(F,{className:p.chatSettingsSeparator,defaultValue:o,label:"Override prompt template",multiline:!0,autoAdjustHeight:!0,onChange:ce}),e.jsx(Oe,{className:p.chatSettingsSeparator,label:"Retrieve this many documents from search:",min:1,max:50,defaultValue:a.toString(),onChange:le}),e.jsx(F,{className:p.chatSettingsSeparator,label:"Exclude category",onChange:pe}),e.jsx($,{className:p.chatSettingsSeparator,checked:m,label:"Use semantic ranker for retrieval",onChange:de}),e.jsx($,{className:p.chatSettingsSeparator,checked:d,label:"Use query-contextual summaries instead of whole documents",onChange:he,disabled:!m}),e.jsx($,{className:p.chatSettingsSeparator,checked:E,label:"Suggest follow-up questions",onChange:me}),e.jsx($e,{className:p.chatSettingsSeparator,label:"Retrieval mode",options:[{key:"hybrid",text:"Vectors + Text (Hybrid)",selected:r==v.Hybrid,data:v.Hybrid},{key:"vectors",text:"Vectors",selected:r==v.Vectors,data:v.Vectors},{key:"text",text:"Text",selected:r==v.Text,data:v.Text}],required:!0,onChange:ue})]})]})]})};je();const ps=be([{path:"/",element:e.jsx(tt,{}),children:[{index:!0,element:e.jsx(hs,{})},{path:"qa",lazy:()=>Y(()=>import("./OneShot-7404dd6b.js"),["assets/OneShot-7404dd6b.js","assets/vendor-7aeae076.js","assets/fluentui-react-b7bb3823.js","assets/fluentui-icons-09adad71.js","assets/OneShot-daa12333.css"])},{path:"*",lazy:()=>Y(()=>import("./NoPage-4ef26c5e.js"),["assets/NoPage-4ef26c5e.js","assets/vendor-7aeae076.js"])}]}]);Te.createRoot(document.getElementById("root")).render(e.jsx(Ne.StrictMode,{children:e.jsx(we,{router:ps})}));export{ne as A,Jt as E,Ft as Q,v as R,cs as S,Et as a,S as b,Mt as c,os as d,xs as e};
//# sourceMappingURL=index-c3174742.js.map
